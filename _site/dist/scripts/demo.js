var developerNotesLogger=function(){function t(){return console&&console.group?(console.group($($("h1").get(0)).text()),$(".wiki-section").each(function(){var t=$(this);t.find("> h2").text()&&console.groupCollapsed(t.find("> h2").text()),e(t),t.find(".sub-section").each(function(){var t=$(this);t.find("> h3").text()&&console.groupCollapsed(t.find("> h3").text()),e(t),t.find(".example").each(function(){var t=$(this);t.find("> h4").text()&&console.groupCollapsed(t.find("> h4").text()),e(t),t.find("> h4").text()&&console.groupEnd()}),t.find("> h3").text()&&console.groupEnd()}),t.find("> h2").text()&&console.groupEnd()}),console.groupEnd(),void 0):(console.log("Please use a real browser for developer notes"),void 0)}function e(t){var e=t.find("> .developer-notes"),i=t.find("> .dependencies").html(),a=t.find("> script").html();a&&(a=a.split(";"),a.shift(),a=a.join(";")),e.each(function(){n($(this).html())}),n(i,"Dependencies"),n(a,"Javascript"),o(t)}function o(t){var e=t.find("> .demo > *").not(".developer-notes");e.each(function(){var t=window.demoCode[selector]||this.outerHTML;n(t,"'"+this.tagName+"' html")})}function n(t,e){t&&t.trim().length&&(e&&console.groupCollapsed(e),console.log.apply(console,i(t.trim().replace(/&lt;/g,"<").replace(/&gt;/g,">"))),e&&console.groupEnd())}function i(t){var e=null===t.match(/<code>/gi)?0:t.match(/<code>/gi).length,o=t.replace(/<code>/gi,"%c").replace(/<\/code>/gi,"%c"),n=[o];if(o.indexOf("%c")>-1)for(var i=0;e>i;i++)n.push("background: #FDF6E3; color: #777;"),n.push("background: white; color:black;");return n}return t};"function"==typeof window.define&&window.define.amd?define("utils/developer-notes-logger",[],function(){return developerNotesLogger()}):developerNotesLogger(),"undefined"==typeof toolkit&&(toolkit={}),toolkit.hashManager=function(){function t(){$(window).on("hashchange",e);var t=document.documentMode,o="onhashchange"in window&&(void 0===t||t>7);o||(c.hash=document.location.hash,setInterval(function(){document.location.hash!==c.hash&&$(window).trigger("hashchange")},200)),c.windowLoaded=!0}function e(t){var e,o;t=l("string"==typeof t?t:location.hash),t?(e=c.globalHashList[t],o="callback",c.lastExecutor=t):c.lastExecutor&&(e=c.globalHashList[c.lastExecutor],o="undo"),e&&"function"==typeof e[o]?e[o](t):"callback"===o&&c.fallback.callback?c.fallback.callback(t):"undo"===o&&c.fallback.undo&&c.fallback.undo(t)}function o(){var t=window.location;"pushState"in history?(location.hash="!",history.pushState("",document.title,t.pathname+t.search)):location.hash="!"}function n(t){location.hash="!"+t}function i(t,o,n){var i=c.globalHashList;$(t).each(function(t,a){if(a=l(a),i[a]){var s="hashManager: hash ("+a+") already exists";throw new Error(s)}i[a]={callback:o,undo:n},c.windowLoaded&&a===l(location.hash)&&e(a)})}function a(){c.globalHashList=[]}function s(t,e){c.fallback.callback=t,c.fallback.undo=e}function l(t){return t.replace(/[#!]/g,"")}var c={globalHashList:{},hasLoaded:!1,windowLoaded:!1,lastExecutor:null,hash:null,fallback:{callback:null,undo:null}};return t(),{register:i,registerFallback:s,change:n,remove:o,onHashChange:e,resetHash:a,cleanHash:l}},"function"==typeof window.define&&window.define.amd?define("utils/hashManager",[],function(){return toolkit.hashManager()}):toolkit.hashManager=toolkit.hashManager(),"undefined"==typeof toolkit&&(toolkit={}),toolkit.focus=function(){function t(){$(document).on("click keyup",i).on("keydown",n).on("focus","a, input, button, select, *[tabindex]",e).on("blur","a, input, button, select, *[tabindex]",o)}function e(t){s&&$(t.currentTarget).addClass(l)}function o(t){$(t.currentTarget).removeClass(l)}function n(t){var e=window.event?event.keyCode:t.keyCode;9==e&&(s=!0)}function i(t){var e=window.event?event.keyCode:t.keyCode;9==e&&(s=!1)}function a(t){$(t).addClass(l),t.focus()}var s=!1,l="has-focus";return t(),{apply:a,className:l}},"function"==typeof window.define&&window.define.amd?define("utils/focus",[],function(){return toolkit.focus()}):toolkit.focus=toolkit.focus(),"undefined"==typeof toolkit&&(toolkit={}),toolkit.lightbox=function(t,e,o){function n(e,o){var n=t(o);n.attr("data-tabindex",n.attr("tabindex")),n.attr("tabindex",-1)}function i(e,o){var n=t(o);n.attr("data-tabindex")?(n.attr("tabindex",n.attr("data-tabindex")),n.removeAttr("data-tabindex")):n.removeAttr("tabindex")}function a(){t("a, input, select, textarea, button, *[tabindex]").each(n)}function s(t){t.find("*[tabindex]").each(i)}function l(t){t&&t.focus()}function c(t,o){t.hasClass(e.className)?e.apply(o[0]):o[0].focus()}function d(){t("body").css({overflow:"hidden","padding-right":f+"px"})}function r(){t("body").removeAttr("style")}function h(e,o,n){var i=t("#"+e.replace("lightbox/",""));this.id=e,this.$container=i.hasClass(u.main)?i:i.closest("."+u.main),this.$contents=this.$container.length?this.$container.find("."+u.content):i,this.$closeIcon=this.$container.find("."+u.closeButton),this.$lightboxLink=o,this.$container.length||(this.create(),this.bindEvents()),n&&(this.onShow=n.onShow,this.onClose=n.onClose)}var u={main:"lightbox",closing:"lightbox-closing",content:"lightbox-content",closeButton:"lightbox-close",open:"lightbox-open"},f=function(){var t,e=document.createElement("div");return e.className="lightbox-scrollbar-measure",document.body.appendChild(e),t=e.offsetWidth-e.clientWidth,document.body.removeChild(e),t}();h.prototype={bindEvents:function(){o.register([this.id],this.open.bind(this)),this.$lightboxLink.on("click",this.open.bind(this)),this.$container.on("click",this.close.bind(this)),this.$closeIcon.on("click",this.close.bind(this)),this.$contents.on("click",function(){return!1})},create:function(){var e=this.$contents,o=this.$contents.parent(),n=t('<div class="'+u.main+'"></div>'),i=t('<div class="skycom-container lightbox-container clearfix"></div>'),a=t('<a class="internal-link '+u.closeButton+' skycon-close" href="#!"><span class="speak">Close</span></a>');e.addClass(u.content+" skycom-10 skycom-offset1").attr("role","dialog"),e.prepend(a),i.append(e),n.append(i),o.append(n),this.$container=n,this.$closeIcon=a},open:function(){this.$container.hasClass(u.open)||(this.onShow&&this.onShow(),d(),this.$container.addClass(u.open),c(this.$lightboxLink,this.$closeIcon),a(),s(this.$container))},close:function(e){var n=this;e.preventDefault(),this.$container.hasClass(u.closing)||(this.$container.addClass(u.closing),o.remove(),window.setTimeout(function(){n.$container.removeClass(u.open+" "+u.closing),l(n.$lightboxLink),r(),s(t("body")),n.onClose&&n.onClose()},500))}},t.fn.lightbox=function(e){return this.each(function(){new h(t(this).attr("href").replace("#!",""),t(this),e)})}},"function"==typeof window.define&&window.define.amd?define("components/lightbox",["utils/focus","utils/hashManager"],function(t,e){return toolkit.lightbox(jQuery,t,e)}):toolkit.lightbox=toolkit.lightbox(jQuery,toolkit.focus,toolkit.hashManager),"undefined"==typeof toolkit&&(toolkit={}),toolkit.displayCode=function(){function t(t){var e=t.feature,o=t.fileNames,i=t.dir,a=t.styled;new n({feature:e,fileNames:o.split(","),dir:i,styled:a})}function e(t,e,o){var n=$(o.replace(/{{ site.version }}/g,$("h1.wiki-header small").text().replace("v","").trim()));$(document.getElementById(t+e+"-table")).append(n)}function o(t,e,o,n){var i=document.getElementById(t+e+"-table"),a=document.createElement("tr"),s=document.createElement("td"),l=document.createElement("td"),c=document.createTextNode(o),d=document.createTextNode(n);s.className="codekolom",l.className="bredecode",s.appendChild(c),l.appendChild(d),a.appendChild(s),a.appendChild(l),i.appendChild(a)}function n(t){this.feature=t.feature,this.dir=t.dir,this.fileNames=t.fileNames,this.styled=t.styled,this.$lightboxLink=$('a[href*="#!lightbox/code-'+this.feature+'"]'),$("#code-"+this.feature).length||this.getCode()}return n.prototype.getCode=function(){for(var t in this.fileNames)this.getFile(this.dir,this.fileNames[t],"html"),this.getFile(this.dir,this.fileNames[t],"js")},n.prototype.getFile=function(t,e,o){var n=this,i=$.ajax({crossDomain:!0,cache:!1,url:t+"/"+e+"."+o});i.always(function(t){n[n.feature+"-"+e+o]="string"==typeof t?t:"",n.addToPage(e,o)})},n.prototype.addToPage=function(t,e){this.$container=this.$lightboxLink.parent().parent().find(".code-container"),this.$tabList=this.$container.find(".tab-list"),this.addContainer(),this.addTab(t,e),this.show(t,e),this.bindEvents(),this.$lightboxLink.lightbox()},n.prototype.addContainer=function(){this.$container.length||(this.$container=$('<div class="code-container" id="code-'+this.feature+'"></div>'),this.$tabList=$('<ul class="tab-list clearfix" ></ul>'),this.$container.append(this.$tabList),this.$lightboxLink.parent().parent().append(this.$container))},n.prototype.createTable=function(t,e){var o=this.feature+"-"+t+e+"-table";return this.styled?$('<div id="'+o+'" class="styled '+e+'"></div> '):$("<table class="+e+'><thead><tr><th colspan="3">'+e.toUpperCase()+'</th></tr></thead><tbody id="'+o+'"></tbody></table> ')},n.prototype.addTab=function(t){var e=this.feature+"-"+t;if(!this.$container.find("#"+e+"-tab").length){var o=$('<li for="'+e+'-tab">'+(t?t:"default")+"</li>");this.$tabList.append(o);var n=$('<div class="tab hidden" id="'+e+'-tab"></div>');n.append(this.createTable(t,"html")).append(this.createTable(t,"js")),this.$container.append(n)}},n.prototype.changeTab=function(){var t=$(this);t.closest(".code-container").find(".tab-list > li").removeClass("medium"),t.closest(".code-container").find(".tab").addClass("hidden"),$("#"+t.attr("for")).removeClass("hidden"),t.addClass("medium")},n.prototype.bindEvents=function(){this.$tabList.on("click","li",this.changeTab),this.$tabList.find("li").first().click()},n.prototype.show=function(t,n){var i=this.feature+"-"+t;if(this.styled)e(i,n,this[i+n]);else{var a=this[i+n]?this[i+n].split("\n"):"";for(var s in a){var l=a[s];o(i,n,parseInt(s,10)+1,l)}}},t},"function"==typeof window.define&&window.define.amd?define("utils/displayCode",["components/lightbox"],function(t){return toolkit.displayCode(t)}):toolkit.displayCode=toolkit.displayCode(toolkit.lightbox);var demo=function(t,e){function o(){$(document).on("click",".toggler",s),$(document).on("click",".code-download",i),$(".sky-form").on("submit",n)}function n(t){t.preventDefault();var e,o=$("#version").val(),n=$(".wiki-header small").text().replace("v",""),i="http://web-toolkit.global.sky.com",a=e="_site/_includes";0===location.hostname.indexOf("local")&&(i="http://"+location.host,e="../_includes"),(o.split(".").length<3||o.split(".")[0]<1)&&$(".sky-form .error").text("The version number is required, and must be '1.0.0' or higher"),(1===parseFloat(o,10)||"0"===o.split(".")[0])&&(o="0.6.9"),window.toolkit.diff({oldRoute:i+"/"+o+"/"+a,newRoute:i+"/"+n+"/"+e})}function i(){var t=!1,e=$(this).attr("href").replace("#!lightbox/code-",""),o=$(".wiki-header small").text().replace("v","").trim(),n="http://web-toolkit.global.sky.com",i="_site/_includes";0===location.hostname.indexOf("local")&&(n="http://"+location.host,i="../_includes");var a,s,l;$(this).attr("data-docs")?(a=$(this).attr("data-docs"),s=e,l=n+"/"+o+"/"+i+"/"+s,t=!0):(a=$('a[href*="#'+e+'"]').attr("data-diff-demos"),s=$('a[href*="#'+e+'"]').attr("data-diff"),l=n+"/"+o+"/"+i+"/"+s),window.toolkit.displayCode({feature:e,dir:l,fileNames:a,styled:t})}function a(){var t=[],e=$("#wiki-skycons tbody tr");e.each(function(e){t.push({i:e,skycon:$(this).find("td").first().text().trim()})}),t.sort(function(t,e){return t.skycon>e.skycon?1:t.skycon<e.skycon?-1:0}),$("#wiki-skycons tbody tr").remove();for(var o=0;o<t.length;o++)$("#wiki-skycons tbody").append($(e[t[o].i]))}function s(){var t=$(this),e=$("div[data-toggle="+t.attr("for")+"]");e.hasClass("open")?(t.removeClass("open"),e.removeClass("open")):(t.addClass("open"),e.addClass("open"))}function l(t,e){var o=e.find(".failures em").text();"0"===o?t.append("<span class='dev-button result-summary'><i class='skycon-tick colour' aria-hidden='true'></i> Tests Passed</span>"):t.append("<span class='dev-button result-summary error'><i class='skycon-warning colour' aria-hidden='true'></i> Tests Failed</span>")}function c(t,e){t.preventDefault();var o=$(t.target).hasClass("lightbox-close")||!$(t.target).hasClass("lightbox-content")&&!$(t.target).parents(".lightbox-content").length;o&&e.hide().removeClass("lightbox-open")}function d(t){t.show().addClass("lightbox-open")}function r(t,e){var o=document.createElement("div"),n=document.createElement("div"),i=document.createElement("article"),a=$('<a class="internal-link lightbox-close skycon-close black" href="#"><span class="speak">Close</span></a>');o.className="lightbox",o.id=e+"-lightbox",n.className="skycom-container lightbox-container clearfix",i.className="lightbox-content skycom-10 skycom-offset1",$(i).append(a),$(i).append(t.find("#mocha-stats")),$(i).append(t.find("#mocha-report")),$(n).append($(i)),$(o).append($(n)),t.append($(o)),d($("#"+e+"-lightbox")),a.add($(o)).on("click",function(t){c(t,$("#"+e+"-lightbox"))})}function h(t){var e=t.replace("test/",""),o=document.createElement("script");o.src="/test/specs/"+e+".js",o.onload=function(){var o=$('a[href*="#'+t+'"]'),n=$('<div id="mocha" class="mocha-container"></div>');o.parent().after(n);var i=window[e]();mocha.grep(i),mocha.run(function(){l(o,n),n.attr("id","mocha-"+e)}),o.removeAttr("href"),$("html, body").animate({scrollTop:n.parent().prev().offset().top},200),r(n,e),o.on("click",function(){d($("#"+e+"-lightbox"))})},document.head.appendChild(o)}function u(){if(!window.require||!window.describe)return setTimeout(u,250),void 0;var t=[];$(".run-test").each(function(){t.push($(this).attr("href").split("#")[1])}),e.register(t,h)}t(),o(),a(),u()};"function"==typeof window.define&&window.define.amd?define("demo",["utils/developer-notes-logger","utils/hashManager","components/lightbox","utils/displayCode"],function(t,e,o,n){return demo(t,e,o,n)}):demo(developerNotesLogger,toolkit.hashManager,toolkit.lightbox,toolkit.displayCode);