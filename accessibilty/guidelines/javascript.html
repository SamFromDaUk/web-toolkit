
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- site CSS -->
  <link rel="stylesheet" href="../assets/css/normalize.css">
  <link rel="stylesheet" href="../assets/css/style.css">
  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="../assets/css/syntax.css">


  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
  <!-- load local copies if you've no internet access-->
  <script>window.jQuery || document.write(unescape('%3Cscript src="/assets/js/jquery.min.js"%3E%3C/script%3E'));
  window.jQuery || document.write(unescape('%3Cscript src="/assets/js/jquery-ui.min.js"%3E%3C/script%3E'));
  </script>
  <script src="../assets/js/jquery.toc.min.js"></script>
  <script src="../assets/js/app.js"></script>

  <link href="../assets/images/favicon.ico" rel="shortcut icon">
  <link href="../assets/images/apple-touch-icon.png" rel="apple-touch-icon">

  <title>HTML / CSS accessibility guidelines</title>
  
  <script src="../assets/js/jquery.player.min.js"></script>
  <script src="../assets/js/swfobject.js"></script>
    
  <link rel="stylesheet" href="../assets/css/player-core.min.css"></script>
  <link rel="stylesheet" href="../assets/css/player-theme.min.css"></script>

</head>

<body>
<div class="wrap" id="top" tabindex="-1">
  <header role="banner">
    <p><a href="../index.html"><img src="../assets/images/sky-logo.png" alt="Sky logo" class="logo1"></a></a> <a class="logo2" href="http://www.nomensa.com"><img src="../assets/images/nomensa-logo-lg.gif" alt="Nomensa logo"></a> <a id="skiplink" href="javascript.html#main" class="hidden show-on">Skip to content</a></p>
    <nav class="main-menu" aria-labelledby="main-menu" role="navigation">
 <h2 id="main-menu" class="hidden">Main menu</h2>
  <ul>
    <li><a href="../index.html">Home</a></li>
    <li><a href="index.html">Guidelines</a></li>
    <li><a href="../examples/index.html">Examples</a></li>
  </ul>
</nav>
  </header>

  <main class="" role="main" id="main" tabindex="-1">

  <nav class="secondary-nav" aria-labelledby="secondary-nav" role="navigation">
<h2 id="secondary-nav">Table of contents</h2>
<div id="toc">
</div>
<a href="javascript.html#top" id="toplink">^ Back to top</a>
</nav>

	<h1>JavaScript, AJAX &amp; ARIA</h1>

	<p>Dynamic functionality is an important part of many websites, so it's critical that each interactive feature meet accessibility goals. This page explains how to use JavaScript, AJAX and ARIA to ensure everyone can use rich content.</p>
	<p>The following WCAG 2.0 success criteria should be considered when developing dynamic functionality for Sky's website.</p>

	<h2 id="keyboard-traps">Avoiding keyboard traps</h2>
	<blockquote class="levelA">
	<p>2.1.2 No Keyboard Trap: If keyboard focus can be moved to a component of the page using a keyboard interface, then focus can be moved away from that component using only a keyboard interface, and, if it requires more than unmodified arrow or tab keys or other standard exit methods, the user is advised of the method for moving focus away.</p>
	</blockquote>
	<p>Many people are unable (or choose not to) use a mouse for navigating websites.  A significant number of these people will use a keyboard instead.  People who rely on the keyboard for navigation will move through the page sequentially by hitting the tab key.  It is entirely possible to render the keyboard unusable if JavaScript is implemented in such a way that the default functionality of navigational keys is overwritten.  Consider the following piece of code:</p>
<pre class="badexample"><code class="javascript">$(document).ready(function(){    
	$('a.trap').keydown(function(event){        
		event.preventDefault(); 
		var href = $(this).attr('href');
		var text = $(this).text();
		window.open(href, text);
	});
});</code></pre>

	<p>This piece of code repurposes a link so that when it has focus and a key is pressed a new window will open.  This has implications for accessibility in itself.  However, it serves as a good example of a keyboard trap.  When a person using a keyboard for navigation presses the tab key to move focus away from the link a new window will be opened and focus will remain on the link.  Focus does not move away from the link because the default action associated with the event has been prevented (see the line <code>event.preventDefault();</code>).  As such, every time a person using a keyboard attempts to move focus away from the link a new window will be opened and focus will remain where it was.  This code example actually presents a more significant issue for people who use a keyboard as opposed to a mouse.  Since the event that triggers this script is not specific to the tab key, any key that is pressed on the keyboard will cause it to run.  This has the effect of completely disabling the keyboard.  If the person visiting the website were completely reliant on the keyboard for navigation they would effectively be locked out of their computer with no option to turn it off and start again.</p>
	<h3>Further reading</h3>
	<ul>
		<li>Nomensa: <a href="http://www.nomensa.com/blog/2011/keyboard-traps/">Keyboard traps</a></li>
		<li>W3C: <a href="http://www.w3.org/TR/UNDERSTANDING-WCAG20/keyboard-operation-trapping.html">Understanding keyboard traps</a></li>
		<li>W3C: <a href="http://www.w3.org/WAI/WCAG20/quickref/#qr-keyboard-operation-trapping">Techniques to avoid keyboard traps</a></li>
	</ul>

	<h2 id="control-animation">Provide controls for animated content</h2>
	<blockquote class="levelA">
		<p>2.2.2 Pause, Stop, Hide: For moving, blinking, scrolling, or auto-updating information, all of the following are true: moving, blinking, scrolling, auto-updating.</p>
	</blockquote>

	<p>JavaScript can make it very easy to provide slide-show type functionality .  In many ways this kind of functionality can enhance the website and engage visitors in ways that would not have been possible before.  However, scrolling and auto-updating content can also be distracting for a significant number of people.  For example, a person with severe dyslexia may find that scrolling content on a page distracts their attention away from the text that they are attempting to read.  As such, if JavaScript is used to scroll or update content on a page, controls should be provided to ensure that the scrolling or updating can be paused.  In terms of best practise it is advisable to ensure that content does not scroll by default.  Instead, the visitor to the website should be able to start and stop the scrolling if they desire.  If content must scroll by default it is advisable to ensure that the content is scrolled through once, when the page first loads, and stops at the end of its first cycle.</p>
	<h3>Further reading</h3>
	<ul>
		<li>W3C: <a href="http://www.w3.org/TR/UNDERSTANDING-WCAG20/time-limits-pause.html">Understanding time limits &amp; pausing</a></li>
		<li>W3C: <a href="http://www.w3.org/WAI/WCAG20/quickref/#qr-time-limits-pause">Techniques for time limits &amp; pausing</a></li>
	</ul>

	<h2>Visible focus order of content</h2>
	<blockquote class="levelA">
		<p>2.4.3 Focus Order: If a Web page can be navigated sequentially and the navigation sequences affect meaning or operation, focusable components receive focus in an order that preserves meaning and operability.</p>
	</blockquote>
	<p>JavaScript is commonly used to show, hide or insert content into HTML documents dynamically.  This can make it much easier to provide an enriching experience for people who visit the website.  However, if not implemented correctly, some people may find it hard to identify dynamic content when it is added.  For example, a blind person using a keyboard for navigation is likely to find it hard to find content that is opened in a lightbox.  This is because of the way in which lightbox widgets have traditionally functioned.  The majority of lightboxes insert HTML into the bottom of the documents source and position it over the rest of the content in the page using absolute positioning.  This is fine for sighted people.  However, a non sighted person using a keyboard is likely to have to tab through the page in its entirety before they are able to interact with the lightbox itself.</p>

	<figure>
		<img src="../assets/images/javascript-01.png" alt="A lightbox appears above the main page dialog.">
		<figcaption>Figure 1: Lightboxes can have accessibility implications.</figcaption>
	</figure>

	<p>For non sighted people who are not aware that this is how lightboxes function, a link that causes a lightbox to open is likely to appear broken.  The same can also be said for a lot of tabbed interfaces and other JavaScript plug-ins on the web today.  As a rule of thumb, if content is shown, hidden or inserted into the DOM, it should be inserted into the document immediately after the element that triggered the action.  For example, if a link is used to open a lightbox, the HTML for the lightbox should be inserted into the source of the document immediately after the link that was clicked.  This will make it easier for people who use a keyboard for navigation to find the content that has been loaded or inserted into the page.</p>

	<p>Another option is to manage the tab-order and actually lock the keyboard focus to the pop-over. The <a href="http://jqueryui.com/dialog/">jQuery UI Dialog</a> takes this approach, and is a good example to use.</p>

	<h3>Further reading</h3>
	<ul>
		<li>W3C: <a href="http://www.w3.org/TR/UNDERSTANDING-WCAG20/navigation-mechanisms-focus-order.html">Understanding focus order</a></li>
		<li>W3C: <a href="http://www.w3.org/WAI/WCAG20/quickref/#qr-navigation-mechanisms-focus-order">Techniques for focus order</a></li>
	</ul>

	<h2>Triggering events on focus</h2>
	<blockquote class="levelA">
		<p>3.2.1 On Focus: When any component receives focus, it does not initiate a change of context.</p>
	</blockquote>

	<p>The focus and blur events can be used to great effect if they are used to supplement a persons' browsing experience.  However, if they are used in such a way that they seize control of interactive elements from the person using the site they can be extremely damaging in terms of accessibility.</p>
	<p>For people who use a keyboard for navigation, the focus event can cause significant issues if used in such a way that moving focus to an element causes some sort of action that is unexpected.  For example, if a form is submitted when the submit button receives focus people who are unable to see their screen are likely to be confused and disorientated.  As far as they are concerned, they did not activate the submit button and as such the form should not have been submitted.</p>
	<p>Conversely, the focus and blur events are frequently used to display or remove tooltips or extra information when an element receives or looses focus.  This is a perfectly valid thing to do, but accessibility is an extremely important consideration to make when building this type of functionality.  Consider a search form on a web page.  Many websites use JavaScript to add a default visible label within the field itself.  When the search field receives focus, this visible label is removed, and replaced when focus is moved away from the field only if the field is left empty.</p>

	<figure>
		<img src="../assets/images/javascript-02.png" alt="Example of some placeholder text disappearing on focus of a form element.">
		<figcaption>Figure 2: Placeholder text used on a form element.</figcaption>
	</figure>

	<p>This is a perfectly valid case for making use of focus and blur events.  However, a blind person using a screen reader would never find this 'label' since whenever they move focus to the field it is removed.  To circumnavigate this issue, we need to ensure that a correctly marked up label is provided and bound to the form field.  This HTML label can be positioned off screen using absolute positioning.  This will ensure that the actual HTML label is available to people who use screen readers, and that a visible alternative is available for sighted people.</p>
	<p>HTML</p>
<pre><code>&lt;label class="rm" for="q"&gt;search&lt;/label&gt;
&lt;input type="text" id="q"&gt;</code></pre>
	<p>CSS</p>
<pre><code>.rm {position: absolute; left: -999em;}</code></pre>

	<h3>Further reading</h3>
	<ul>
		<li>W3C: <a href="http://www.w3.org/TR/UNDERSTANDING-WCAG20/consistent-behavior-receive-focus.html">Understanding consistent focus behavior</a></li>
		<li>W3C: <a href="http://www.w3.org/WAI/WCAG20/quickref/#qr-consistent-behavior-receive-focus">Techniques for consistent focus behavior</a></li>
	</ul>

	<h2 id="triggering-events">Triggering events on input</h2>
	<blockquote class="levelA">
	<p>3.2.2 On Input: Changing the setting of any user interface component does not automatically cause a change of context unless the user has been advised of the behaviour before using the component.</p>
	</blockquote>
	<p>Many sites on the web today make use of JavaScript to submit forms when someone selects an option from a drop down select box.  This kind of functionality is frequently employed to provide widgets that allow people to dynamically filter search results or content on a page.</p>

	<figure>
		<img src="../assets/images/javascript-03.png" alt="Ebay uses drop-down elements to allow people to filter content but does not provide a submit button.">
		<figcaption>Figure 3: Provide submit buttons for form elements.</figcaption>
	</figure>

	<p>Sighted people are often able to identify new or updated content on the page when JavaScript is used in this way.  However, for people who are blind this change to the page may not be so apparent.  Furthermore, if a blind person using a screen reader was to make a selection from a select box which prompted a page refresh they would likely find themselves confused and disorientated.  Strictly speaking, every single form on a page should have a submit button.  JavaScript should not be used to submit forms automatically.  Control over form submissions should be left in the hands of the person using the form. This will ensure that web pages containing forms will behave in an entirely predictable manner and will reduce the amount of potential confusion surrounding form submissions.</p>
	<h3>Further reading</h3>
	<ul>
		<li>W3C: <a href="http://www.w3.org/TR/UNDERSTANDING-WCAG20/consistent-behavior-unpredictable-change.html">Understand consistent form behaviour</a></li>
		<li>W3C: <a href="http://www.w3.org/WAI/WCAG20/quickref/#qr-consistent-behavior-unpredictable-change">Techniques for consistent form behaviour</a></li>
	</ul>

	<h2 id="unconventional-features">Unconventional features and behaviour</h2>

	<blockquote class="levelA">
		<p>4.1.2 Name, Role, Value: For all user interface components (including but not limited to: form elements, links and components generated by scripts), the name and role can be programmatically determined; states, properties, and values that can be set by the user can be programmatically set; and notification of changes to these items is available to user agents, including assistive technologies.</p>
	</blockquote>
	<p>It is common place to find all sorts of widgets on the web today that were not originally accounted for in previous HTML specifications.  On a day to day basis you are likely to encounter slider widgets, drag and drop functionality and all sorts of other user interface components.  One of the main problems that this presents for web developers today is in exposing semantic information about these widgets, user interface components and their states at any given time to visually impaired people.</p>
	<p>Consider a video player on a web page. The video player has a slider bar that:</p>
	<ol>
		<li>Identifies the current position of the video;</li>
		<li>Allows people to skip to a different part of the video with ease.</li>
	</ol>
	<p>This is great for sighted people.  However, HTML lacks the semantic capability to present this information to people who use assistive technologies such as screen readers in a dynamic way.  For example, it is very hard to identify the current position of a video to a person using a screen reader using only JavaScript and HTML. </p>
	<p>This checkpoint therefore tries to address some of the accessibility implications of creating bespoke or non-standards compliant features on a website and aims to provide guidance on what tools a developer can use to create the best possible experience for every user, regardless of any disability they might have.</p>

	<p>If you create things that are not supported by native (HTML) semantics, check the <a href="http://www.w3.org/TR/wai-aria-primer/">Accessible Rich Internet Applications specification</a> (WAI-ARIA) which covers most interfaces that you can create on the web. However, it should be noted that creating custom controls does require a great deal of testing across different browsers, screen readers and other assistive technology.</p>

	<p>A quick example of how ARIA works is the <a href="http://sky-toolkit.nomensa.com/examples/tabs.html--%3E">tabs example</a>, where you indicate that a <code>&lt;ul&gt;</code> is the navigation for the tabs by dynamically adding <code>role=”tablist”</code> .</p>

	<p>NB: The ARIA landmark roles are safe to use on static sites so are described with the <a href="http://sky-toolkit.nomensa.com/guidelines/html-css.html/#aria">HTML guidelines</a>.</p>

	<p>A few general practice rules have been established for enhancing standard markup with WAI-ARIA:</p>
	<ol>
		<li><p><strong>Use native semantics</strong>.</p> 
			<p>If there is a native HTML/HTML5 element that has the required semantics built in, use that.</p>
			<p>For example, buttons are already clickable and keyboard selectable, so they are better than giving the role of <code>button</code> so an element without those semantics built in, e.g. <code>span</code>.</p></li>
		<li><p><strong>Do not over-ride native semantics</strong>.</p>
			<p>For example, rather than making a heading into a button, nest a button in the heading:<br>
				<code>&lt;h1&gt;&lt;button&gt;heading button&lt;/button&gt;&lt;/h1&gt;</code></p></li>
		<li><p><strong>All elements must be keyboard operable.</strong></p>
			<p>For example, if you are turning a <code>span</code> into a button (a bad practice, but just for example), applying <code>role=&quot;button&quot;</code> does not mean a user can focus on the <code>span</code> or select it, those aspects need to be added with JavaScript.</p></li>
	</ol>

	<p>For a (very full) summary when to use the various ARIA attributes see <a href="http://rawgithub.com/w3c/aria-in-html/master/index.html">Using WAI-ARIA in HTML</a>.</p>

	<h3>Further reading</h3>
	<ul>
		<li><a href="http://sky-toolkit.nomensa.com/examples.html">Examples</a> of widgets used on Sky.com with the accessibility requirements and criteria spelt out.</li>
		<li>W3C: <a href="http://rawgithub.com/w3c/aria-in-html/master/index.html">Using WAI-ARIA in HTML</a></li>
		<li>W3C: <a href="http://www.w3.org/TR/UNDERSTANDING-WCAG20/ensure-compat-rsv.html">Understanding custom components</a></li>
		<li>W3C: <a href="http://www.w3.org/WAI/WCAG20/quickref/#qr-ensure-compat-rsv">Techniques for custom components</a></li>
	</ul>
	<h2>Final thoughts</h2>
	<p>Rich content and dynamic functionality can often introduce behaviour that seems out of place on a website. People will happily use tabs in an application for example, but find them unintuitive when they encounter the same functionality on a web page. There is a learning curve for everyone, but for people with cognitive, mobility or visual disabilities, the challenge is even more acute.</p>
	<p>Introducing rich content and dynamic functionality into a website adds accessibility complexity. Addressing accessibility at each stage of the development lifecycle is the key to overcoming this complexity, before you consider the content you'll be adding.</p>



  </main> 

</div><!-- end .wrap -->

<footer role="contentinfo">
  <p>Created by <a href="http://www.nomensa.com">Nomensa</a> for BSkyB - <a href="mailto:bskyb@nomensa.com?subject=Accessibility%20Question%20-%20Sky">Questions</a></p>
  <ul>
    <li><a href="../glossary.html">Glossary</a></li>
  </ul>

</footer>

</body>

</html>
