
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- site CSS -->
  <link rel="stylesheet" href="../assets/css/normalize.css">
  <link rel="stylesheet" href="../assets/css/style.css">
  <!-- syntax highlighting CSS -->
  <link rel="stylesheet" href="../assets/css/syntax.css">


  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
  <!-- load local copies if you've no internet access-->
  <script>window.jQuery || document.write(unescape('%3Cscript src="/assets/js/jquery.min.js"%3E%3C/script%3E'));
  window.jQuery || document.write(unescape('%3Cscript src="/assets/js/jquery-ui.min.js"%3E%3C/script%3E'));
  </script>
  <script src="../assets/js/jquery.toc.min.js"></script>
  <script src="../assets/js/app.js"></script>

  <link href="../assets/images/favicon.ico" rel="shortcut icon">
  <link href="../assets/images/apple-touch-icon.png" rel="apple-touch-icon">

  <title>Show / hide elements</title>
  
  <script src="../assets/js/example-show-hide.js"></script>
    
  <link rel="stylesheet" href="../assets/css/example-show-hide.css"></script>

</head>

<body>
<div class="wrap" id="top" tabindex="-1">
  <header role="banner">
    <p><a href="../index.html"><img src="../assets/images/sky-logo.png" alt="Sky logo" class="logo1"></a></a> <a class="logo2" href="http://www.nomensa.com"><img src="../assets/images/nomensa-logo-lg.gif" alt="Nomensa logo"></a> <a id="skiplink" href="show-hide.html#main" class="hidden show-on">Skip to content</a></p>
    <nav class="main-menu" aria-labelledby="main-menu" role="navigation">
 <h2 id="main-menu" class="hidden">Main menu</h2>
  <ul>
    <li><a href="../index.html">Home</a></li>
    <li><a href="../guidelines/index.html">Guidelines</a></li>
    <li><a href="index.html">Examples</a></li>
  </ul>
</nav>
  </header>

  <main class="" role="main" id="main" tabindex="-1">

  <nav class="secondary-nav" aria-labelledby="secondary-nav" role="navigation">
<h2 id="secondary-nav">Table of contents</h2>
<div id="toc">
</div>
<a href="show-hide.html#top" id="toplink">^ Back to top</a>
</nav>

<h1>Show-hide elements</h1>
<p>Sky.com site uses several mechanisms for showing and hiding content, some of which do not (currently) allow for keyboard access.</p>

<figure>
	<img class="bordered" src="../assets/images/resources-show-hide-01.png" alt="The legal bit of the Buy Sky page is not keyboard accessible.">
	<figcaption>Figure 1: People using a keyboard cannot access the legal bit.</figcaption>
</figure>


<h2>Accessibility requirements</h2>

<p>A show/hide element should work with mouse, keyboard and touch-devices. The basic requirements are that:</p>

<ul>
	<li>It is obvious what you are supposed to do (the 'Show' text in figure 1 achieves this), not relying on colour as an indicator.</li>
	<li>A visual keyboard user can tab to the element, see that 'show' is in focus, and select the element</li>
	<li>A screen reader user can select the element and know that it opens content underneath</li>
	<li>Using a keyboard should not activate the 'show' link automatically by tabbing past.</li>
	<li>The show/hide elements work consistently across the whole site.</li>
</ul>

<h2>Methods</h2>

<p>The easiest way to achieve this is usually to use native elements. Either standard link elements (<code>&lt;a&gt;</code>) and JavaScript, or the HTML5  <code>&lt;summary&gt;</code> and <code>&lt;details&gt;</code> elements.</p>

<p>It is also advisable to include some WAI-ARIA markup via JavaScript so that the 'state' of the controls can be communicated. This means applying <code>role=&quot;button&quot;</code> and <code>aria-pressed</code> (true/false)to the show/hide control, and <code>aria-expanded</code> (true/false) to the content.<br>
NB: Using <code>display: none</code> (as the jQuery show/hide code does) will hide the content from screen readers as well.</p>

<p>As a small enhancement, it can help Windows based screen readers to move the focus to the new content when the control is selected.</p>

<h2>Example using Details / Summary elements</h2>
<p>This example is intended to <strong>demonstrate the accessibility features</strong> needed, it is not intended to be production-ready JavaScript or CSS. It could also be adapted for a HTML4 version very easily, replacing the <code>summary</code> with a standard link. The 'select to show' text is shown so that you can see what's happening, in production it could be hidden off-screen, or you could use a foreground images with that text as alt-text.</p>

<p>Demo using details/summary elements with a JavaScript fallback:</p>

<details>
	<summary>^OffersShow <span class="open">Select to show</span> <span class="close">Select to close<span></summary>
	<div>
		<p><strong>Free Sky+HD box offer:</strong> Sky+HD box free with free standard set-up for new customers joining Sky TV online. One free box per household. This is a new customer offer.</p>
		<p>New Sky TV customer online Marks and Spencer voucher offer: £25 M&amp;S vouchers for new customers joining Sky TV. Only available at sky.com. Not available in conjunction with any other offer. One voucher per household. Voucher sent, within 45 days of activating your service, to the email address provided when joining Sky. M&amp;S terms apply. Offer ends 16 May 2013.</p>
	</div>
</details>
<details>
	<summary>**Sky TV <span class="open">Select to show</span> <span class="close">Select to close</span></summary>
	<div>
		<p>** HD channels received depend on your Sky TV subscription. BBC HD Channels, ITV HD (England &amp; Wales only), Channel 4 HD, Channel 5 HD, NHK World HD and RT HD are available without subscription. Channel 5 HD requires a viewing card.</p>
		<p>*On Demand: Available to Sky TV customers with compatible black Sky+HD box. Downloading content requires broadband connection (minimum recommended speed 2 Mbps) and self set-up using own cable or wireless connector (£21.95 - limits apply). Downloads count towards any usage caps. Content depends on your Sky TV/HD subscription. Sky Store costs extra. Sky Movies 1&amp;2 or Sky Sports 1&amp;2 required for Sky Movies or Sky Sports. Sky+HD subscribers without Sky TV can access BBC iPlayer only. Downloadable HD content takes longer to start viewing.</p>
	</div>
</details>

<h3>HTML</h3>
	
	<p>The HTML code for the example (shortened) is:</p>
<div class="highlight"><pre><code class="html"><span class="nt">&lt;details&gt;</span>
  <span class="nt">&lt;summary&gt;</span>^OffersShow 
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;open&quot;</span><span class="nt">&gt;</span>Select to show<span class="nt">&lt;/span&gt;</span> 
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;close&quot;</span><span class="nt">&gt;</span>Select to close<span class="nt">&lt;/span&gt;</span>
  <span class="nt">&lt;/summary&gt;</span>
  <span class="nt">&lt;div&gt;&lt;p&gt;&lt;strong&gt;</span>Free Sky+HD box offer:<span class="nt">&lt;/strong&gt;</span> Sky+HD box ...
<span class="nt">&lt;/details&gt;</span>
</code></pre></div>

<p>The two messages about selecting open/closed are purely aimed at screen readers, and can be hidden off-page with CSS or replaced with an image.</p>

<h3>JavaScript</h3>

<p>JavaScript is used to polyfil for non-webkit browsers which do not understand details/summary, this is not shown here for brevity but is the first function in the <a href="../assets/js/example-show-hide.js">JS file</a>. <strong>NB:</strong> There is a more heavy weight <a href="http://mathiasbynens.be/notes/html5-details-jquery">details/summary polyfil</a> available, but depending on the browser support required the above approach may suffice.</p>

<p>For all browsers we add the WAI-ARIA attributes and some (possibly hidden) instructions for screen reader users who may not be aware of this interaction:</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;summary .close&#39;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">&#39;summary .open&#39;</span><span class="p">).</span><span class="nx">show</span><span class="p">();</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">&#39;details&gt;div&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">({</span>
	<span class="s1">&#39;aria-expanded&#39;</span><span class="o">:</span> <span class="s1">&#39;false&#39;</span><span class="p">,</span> 
	<span class="s1">&#39;tabindex&#39;</span><span class="o">:</span> <span class="s1">&#39;-1&#39;</span>
<span class="p">});</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">&#39;summary&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">({</span><span class="s1">&#39;role&#39;</span><span class="o">:</span> <span class="s1">&#39;button&#39;</span><span class="p">,</span> <span class="s1">&#39;aria-pressed&#39;</span><span class="o">:</span> <span class="s1">&#39;false&#39;</span><span class="p">});</span>
</code></pre></div>

<p>This adds the (default closed) <code>aria-expanded</code> to the contents that will be shown, and applies <code>tabindex=-1</code> so the keyboard focus can be set to it by a script later.</p>

<p>Then there is a function to toggle those attributes when selected:</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">$</span><span class="p">(</span><span class="s1">&#39;summary&#39;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// toggle status text</span>
  <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">children</span><span class="p">(</span><span class="s1">&#39;span&#39;</span><span class="p">).</span><span class="nx">toggle</span><span class="p">();</span>

  <span class="kd">var</span> <span class="nx">thisContent</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">parent</span><span class="p">().</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;&gt;div&quot;</span><span class="p">);</span>
  
  <span class="c1">// toggle aria values.</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">thisContent</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;aria-expanded&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;false&#39;</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">$</span><span class="p">(</span><span class="nx">thisContent</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;aria-expanded&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">);</span>
     <span class="nx">$</span><span class="p">(</span><span class="nx">thisContent</span><span class="p">).</span><span class="nx">focus</span><span class="p">();</span> <span class="c1">// move focus to new content</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
     <span class="nx">$</span><span class="p">(</span><span class="nx">thisContent</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;aria-expanded&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;aria-pressed&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;false&#39;</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;aria-pressed&#39;</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
     <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;aria-pressed&#39;</span><span class="p">,</span> <span class="s1">&#39;false&#39;</span><span class="p">);</span>
  <span class="p">}</span>

<span class="p">});</span>
</code></pre></div>


<h3>CSS</h3>
<p>Lastly, a little styling to ensure browsers display them properly:</p>

<div class="highlight"><pre><code class="css"><span class="nt">summary</span> <span class="p">{</span> <span class="k">cursor</span><span class="o">:</span> <span class="k">pointer</span><span class="p">;</span> <span class="p">}</span>
<span class="nt">summary</span> <span class="nt">span</span> <span class="p">{</span><span class="k">float</span><span class="o">:</span> <span class="k">right</span><span class="p">;}</span>
<span class="nt">summary</span><span class="nd">:focus</span><span class="o">,</span> <span class="nt">details</span><span class="o">&gt;</span><span class="nt">div</span><span class="nd">:focus</span> <span class="p">{</span> <span class="k">outline</span><span class="o">:</span> <span class="m">0</span><span class="p">;}</span>
<span class="nt">summary</span><span class="nd">:focus</span> <span class="p">{</span> <span class="k">background</span><span class="o">:</span> <span class="m">#ddd</span><span class="p">;</span> <span class="p">}</span>

<span class="c">/* Needed for browsers which don&#39;t understand details/summary */</span> 
<span class="nt">details</span><span class="o">,</span> <span class="nt">summary</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span> <span class="p">}</span>
<span class="nc">.no-details</span> <span class="nt">summary</span><span class="nd">:hover</span><span class="o">,</span> 
<span class="nc">.no-details</span> <span class="nt">summary</span><span class="nd">:focus</span> <span class="p">{</span> <span class="k">background</span><span class="o">:</span> <span class="m">#ddd</span><span class="p">;</span> <span class="p">}</span>
<span class="nc">.no-details</span> <span class="nt">details</span> <span class="o">&gt;</span> <span class="o">*</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span> <span class="p">}</span>
<span class="nc">.no-details</span> <span class="nt">details</span> <span class="nt">summary</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span> <span class="p">}</span>

<span class="c">/* in case the JS doesn&#39;t work in time */</span>
<span class="nc">.close</span> <span class="p">{</span> 
   <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>

<p><strong>NB:</strong> Be very careful when removing the focus outline on focusable elements (like the summary) that you replace it with something, otherwise keyboard-only users will get lost.</p>


<p>For the full JavaScript / CSS code examples please check:</p>
<ul><li><a href="../assets/js/example-show-hide.js">example-show-hide.js</a></li>

  <li><a href="../assets/css/example-show-hide.css">example-show-hide.css</a></li>
</ul>


<h2>Testing</h2>

<p>As well as testing with supported browsers and a mouse, check that:</p>
<ul>
	<li>You can tab to the summary (open) element, and press enter to open it.</li>
	<li>Tabbing to or past each element does not automatically activate the opening.</li>
	<li>You can see (via outline or other visible change) that the summary is highlighted.</li>
</ul>
<p>Also, with common screen readers (JAWs, NVDA, VoiceOver/OSX &amp; VoiceOver/iOS) check that:</p>
<ul>
	<li>You can tab and arrow to the summary.</li>
	<li>You can hear the help text (e.g. &quot;Select to open&quot;) and/or ARIA attributes (e.g. &quot;button&quot;).</li>
	<li>You can select the summary and arrow down to the new content.</li> 
</ul>



  </main> 

</div><!-- end .wrap -->

<footer role="contentinfo">
  <p>Created by <a href="http://www.nomensa.com">Nomensa</a> for BSkyB - <a href="mailto:bskyb@nomensa.com?subject=Accessibility%20Question%20-%20Sky">Questions</a></p>
  <ul>
    <li><a href="../glossary.html">Glossary</a></li>
  </ul>

</footer>

</body>

</html>
