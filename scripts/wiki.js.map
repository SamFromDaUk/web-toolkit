{"version":3,"file":"wiki.js","sources":["utils/hashmanager.js","modules/tabs.js","modules/carousel.js","toolkit.js"],"names":[],"mappings":"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","sourcesContent":["\n/**\n purpose:\n to let 'anchor' tags do their job and change the hash in the url for internal links.\n this will execute the associated callback with that hash.\n no onclick events needed.\n **/\nif (typeof toolkit==='undefined') toolkit={};\ntoolkit.hashmanager = (function() {\n\n    var vars = {\n        globalHashList: {},\n        hasLoaded: false,\n        windowLoaded: false\n    };\n\n    function bindEvents() {\n        $(window).on('hashchange', onHashChange);\n        var hashChangeSupport = 'onhashchange' in window;\n        if (!hashChangeSupport){ //IE7 support\n            vars.hash = document.location.hash;\n            setInterval(function(){\n                if (document.location.hash !== vars.hash){\n                    onHashChange(document.location.hash);\n                }\n            },200);\n        }\n        vars.windowLoaded = true;\n    }\n\n    function onHashChange(hash) {\n        hash = cleanHash((typeof hash === 'string') ? hash : location.hash);\n        var evt = vars.globalHashList[hash];\n        if (!evt) { return; }\n        evt.callback(hash);\n    }\n\n    function remove() {\n        var loc = window.location;\n        if (\"pushState\" in history) {\n            location.hash = '!';\n            history.pushState(\"\", document.title, loc.pathname + loc.search);\n        } else {\n            location.hash = '!';\n        }\n    }\n\n    function change(hash){\n        location.hash = '!' + hash;\n    }\n\n    function register(hashList, callback){\n        var globalHashList = vars.globalHashList;\n        $(hashList).each(function(i, hash) {\n            hash = cleanHash(hash);\n            if (globalHashList[hash]){\n                var err = 'hashManager: hash (' + hash + ') already exists';\n                throw new Error(err);\n            }\n            globalHashList[hash] = {\n                callback: callback\n            };\n\n            if (vars.windowLoaded && hash === cleanHash(location.hash)) {\n                callback(hash);\n            }\n        });\n    }\n\n    function cleanHash(hash) {\n        return hash.replace(/[#!]/g, '');\n    }\n\n    bindEvents();\n\n    return {\n        register: register,\n        change: change,\n        remove: remove,\n        onHashChange: onHashChange,\n        cleanHash: cleanHash\n    };\n}());\n\nif (typeof window.define === \"function\" && window.define.amd) {\n    define('utils/hashmanager', [], function() {\n        return toolkit.hashmanager;\n    });\n};","\n/**\n purpose:\n to automatically hook into the bootstrap html and shows/hides tabs.\n Works based registering the tabs 'hash' with the changeTab function.\n no onclick events needed.\n**/\nif (typeof toolkit==='undefined') toolkit={};\ntoolkit.tabs = (function(hash) {\n\n    var $el = {\n        tabContainer: $('section[data-function=tabs]'),\n        tabs: $('section[data-function=tabs] li[role=tab]'),\n        tabTargets: $('section[data-function=tabs] div[role=tabpanel]')\n    };\n    var vars = {\n        rememberState : $el.tabContainer.attr('data-remember-state')==='true'\n    };\n\n    function bindEvents() {\n        if (vars.rememberState){\n            hash.register(getHashList(), changeTab);\n        } else {\n            $el.tabs.on('click', function(e){\n                e.preventDefault();\n                changeTab($(this).find('a').attr('href'));\n            });\n        }\n    }\n\n    function getHashList() {\n        var arrHash = [];\n        $el.tabs.each(function(){\n            arrHash.push($(this).attr('aria-controls'));\n        });\n        return arrHash;\n    }\n\n    function changeTab(controlId){\n        $el.tabTargets.add($el.tabs).removeClass(\"selected\");\n        $('#' + controlId + '-tab').add($(\"#\" + controlId))\n            .addClass('selected');\n    }\n\n    bindEvents();\n\n    return {\n        getHashList: getHashList,\n        changeTab: changeTab\n    };\n\n}(toolkit.hashmanager));\n\n\nif (typeof window.define === \"function\" && window.define.amd) {\n    define('modules/tabs', ['utils/hashmanager'], function() {\n        return toolkit.tabs;\n    });\n};","\nif (typeof toolkit==='undefined') toolkit={};\ntoolkit.carousel = (function(window, $) {\n    'use strict';\n\n    // get CSS3 capabilities\n    var has3d = (function() {\n        return ('WebKitCSSMatrix' in window && 'm11' in new window.WebKitCSSMatrix());\n    }());\n    var hasTransform = (function() {\n        var s = document.body.style;\n        return s.transform !== undefined || s.WebkitTransform !== undefined || s.MozTransform !== undefined || s.OTransform !== undefined;\n    }());\n    var clickEvent = 'ontouchend' in document.documentElement ? 'touchend' : 'click';\n\n    function Carousel(element, options) {\n        this.options = options;\n        this.$viewport = element;\n        this.$slideContainer = element.find('.skycom-carousel-container');\n        this.$slides = this.$slideContainer.find('>');\n        this.currentIndex = 0;\n        this.slideCount = this.$slides.length;\n        this.timerId = false;\n        this.touchReset();\n        this.bindEvents();\n    }\n\n    Carousel.prototype = {\n        unbindTouchEvents: function() {\n            this.$slideContainer.off('touchstart touchmove touchend touchcancel');\n        },\n        bindTouchEvents: function() {\n            this.$slideContainer\n                .on('touchstart', this.touchstart.bind(this))\n                .on('touchmove', this.touchmove.bind(this))\n                .on('touchend', this.touchend.bind(this))\n                .on('touchcancel', this.touchReset.bind(this));\n        },\n        bindEvents: function() {\n            this.bindTouchEvents();\n            this.$slideContainer.find('a').on('click', this.pause.bind(this));\n        },\n        unbindEvents: function() {\n            this.unbindTouchEvents();\n            this.$slideContainer.find('a').off('click');\n        },\n        setOffset: function(percent, animate) {\n            var $container = this.$slideContainer.removeClass(\"animate\");\n            if (animate) $container.addClass(\"animate\");\n            if (has3d) {\n                $container.css(\"transform\", \"translate3d(\"+ percent +\"%,0,0) scale3d(1,1,1)\");\n            } else if (hasTransform) {\n                $container.css(\"transform\", \"translate(\"+ percent +\"%,0)\");\n            } else if (animate) {\n                $container.animate({'left': (percent*2) + '%'}, 600);\n            } else {\n                $container.css({'left': (percent*2) + '%'});\n            }\n            return this;\n        },\n        moveSlide : function(opts){//index, start, end, callback, reverse\n            var self = this,\n                $slides = this.$slides,\n                cssFloat, indexToShow;\n\n            indexToShow = (opts.index >= this.slideCount)?0:(opts.index < 0) ? this.slideCount - 1 : opts.index;\n            cssFloat = (opts.index>this.currentIndex && !opts.reverse) ? 'left' : 'right';\n\n            $slides.filter(':not(:eq(' + this.currentIndex + '))').hide();\n            $slides.eq(this.currentIndex).css('float', cssFloat);\n            $slides.eq(indexToShow).show().css('float', cssFloat == 'left' ? 'right' : 'left');\n\n            this.setOffset(opts.start, false);\n            if (typeof opts.end !== 'undefined'){\n                setTimeout(function(){\n                    self.setOffset(opts.end, true);\n                    self.$viewport.trigger('change', indexToShow);\n                }, 20);\n                this.currentIndex = indexToShow;\n                if (typeof opts.callback == 'function') opts.callback(indexToShow);\n            }\n            return indexToShow;\n        },\n        goto: function(slideIndex, pause, callback) {\n            if (pause !== false) this.pause();\n            if (slideIndex===this.currentIndex) { return; }\n\n            if ((slideIndex>this.currentIndex)) {\n                this.moveSlide({index: slideIndex, start:0, end:-50, callback:callback});\n            } else{\n                this.moveSlide({index: slideIndex, start:-50, end: 0, callback:callback});\n            }\n            return this;\n        },\n        next: function(pause, callback) {\n            this.goto(this.currentIndex + 1, pause, callback);\n            this.$viewport.find('.indicators, .actions').css('display', 'block');\n            return this;\n        },\n        previous: function() {\n            this.goto(this.currentIndex - 1);\n            this.$viewport.find('.indicators, .actions').css('display', 'block');\n            return this;\n        },\n        play: function(callback, delay) {\n            var self = this,\n                interval = this.options.interval;\n            self.timerId = setTimeout(function() { //timeout for small delay after pressing pay button\n                self.next(false);\n                self.timerId = setTimeout(function loop() {  //timeout interval between slides\n                    self.next(false, function() {\n                        self.timerId = setTimeout(loop, interval);\n                    });\n                }, interval);\n            }, delay || this.options.onPlayDelay);\n\n            this.$viewport.trigger('playing');\n            if (typeof callback == 'function') callback();\n            return this;\n        },\n        pause: function(callback) {\n            clearTimeout(this.timerId);\n\n            this.$viewport.trigger('paused');\n            if (typeof callback == 'function') callback();\n            return this;\n        },\n        touchstart: function(e) {\n            var touch = e.originalEvent.touches[0];\n            this.pause();\n            this.swipe.start = {x: touch.pageX, y:touch.pageY};\n        },\n        touchmove: function(e) {\n            var swipe = this.swipe,\n                touch = e.originalEvent.touches[0],\n                xDifference = touch.pageX - swipe.start.x,\n                yDifference = touch.pageY - swipe.start.y,\n                scrollingCarousel = Math.abs(xDifference) > Math.abs(yDifference),\n                slideIndex = xDifference<0?this.currentIndex+1:this.currentIndex- 1,\n                positionAsPercentage;\n\n            if (!swipe.start || scrollingCarousel===false) return;\n            e.preventDefault();\n\n            positionAsPercentage = (xDifference / this.$slideContainer.outerWidth(true)) * 100;\n            if (xDifference>0) positionAsPercentage -=50;\n            this.swipe.positionAsPercentage = positionAsPercentage;\n\n            this.moveSlide({index:slideIndex,start:positionAsPercentage});\n        },\n        touchend: function(e) {\n            if (!this.swipe.start) return;\n            var swipe = this.swipe,\n                position = swipe.positionAsPercentage,\n                touch = e.originalEvent.changedTouches[0],\n                xDifference = touch.pageX - swipe.start.x,\n                direction = null,\n                threshold = 75;\n            if (Math.abs(xDifference) > threshold) {\n                direction = (xDifference < 0) ? 'left' : 'right';\n            }\n\n            if (direction === 'left') {\n                this.moveSlide({\n                    index: this.currentIndex + 1,\n                    start: position,\n                    end: -50\n                });\n            } else if (direction === 'right') {\n                this.moveSlide({\n                    index: this.currentIndex - 1,\n                    start: position,\n                    end:0\n                });\n            } else if (position !== 0) {\n                var start = (xDifference > 0) ? position + 50 : position,\n                    index = this.currentIndex,\n                    end = 0,\n                    reverse;\n                if (start < 0){\n                    this.currentIndex = (index+1>=this.slideCount) ? 0 : index+1;\n                } else {\n                    this.currentIndex -= 1;\n                    end = -50;\n                    start -= 50;\n                }\n                reverse = this.currentIndex===0 && index === this.slideCount-1;\n                this.moveSlide({\n                    index: index,\n                    start: start,\n                    end: end,\n                    reverse: reverse\n                });\n            }\n            this.touchReset();\n        },\n        touchReset: function() {\n            this.swipe = {\n                start: false,\n                positionAsPercentage: 0\n            };\n        }\n    };\n\n    function Video($wrapper, carousel, options) {\n        this.carousel = carousel;\n        this.wrapper = $wrapper;\n        this.videoId = this.wrapper.data('video-id');\n        this.player = this.wrapper.find('video');\n        this.player.sky_html5player($.extend(true, {\n            videoId: this.videoId\n        }, options.player));\n        this.videocontrolcontainer = this.wrapper.find('.videocontrolcontainer');\n        this.videocontrolcontainer.find('img').on('error', function() {\n            this.src = options.placeHolderImage;\n        });\n        this.bindEvents();\n    }\n\n    Video.prototype = {\n        bindEvents: function(){\n            var $self = this,\n                hijackLink = function() {\n                  return false;\n                },\n                stop = function(e){\n                    $self.stop();\n                    $wrapper.off('click', hijackLink);\n                    return false;\n                },\n                $wrapper = this.wrapper;\n            $wrapper.on('click', hijackLink).find('.close').one(clickEvent, stop);\n            this.player.on('ended webkitendfullscreen', stop);\n        },\n        play: function() {\n            var $self = this,\n                carouselControls = this.carousel.$viewport.find('.actions, .indicators');\n            this.originalHtml = this.videocontrolcontainer.html();\n            this.carousel.pause();\n            this.showCanvas(function() {\n                carouselControls.hide();\n                $self.carousel.unbindTouchEvents();\n                $self.videocontrolcontainer.add($self.player).show();\n                sky.html5player.play($self.wrapper);\n            });\n        },\n        stop: function() {\n            var $self = this,\n                carouselControls = this.carousel.$viewport.find('.actions, .indicators');\n            sky.html5player.close(this.wrapper);\n\n            this.hideCanvas( function(){\n                $self.carousel.bindTouchEvents();\n                $self.videocontrolcontainer.hide().remove();\n                carouselControls.show();\n                $('<div></div>').addClass('videocontrolcontainer').html($self.originalHtml).appendTo($self.wrapper);\n            });\n        },\n        showCanvas: function(callback) {\n            var height,\n                $carousel = this.carousel.$viewport,\n                $overlay = $carousel.find('.video-overlay'),\n                $wrapper = $carousel.find('.video-wrapper'),\n                $play = $carousel.find('.video-wrapper .play'),\n                $close = $carousel.find('.video-wrapper .close'),\n                speed= 500;\n            this.originalHeight = $carousel.height();\n            $wrapper.addClass('playing-video');\n            $overlay.fadeIn(function() {\n                $play.fadeOut();\n                height = Math.round(($carousel.width() / 16) * 9);\n                $carousel.animate({ height: height }, speed, function() {\n                    callback();\n                    $overlay.fadeOut(speed, function() {\n                        $close.addClass('active');\n                    });\n                });\n            });\n        },\n        hideCanvas: function(callback) {\n            var $carousel = this.carousel.$viewport,\n                $overlay = $carousel.find('.video-overlay'),\n                $wrapper = $carousel.find('.video-wrapper'),\n                $play = $carousel.find('.video-wrapper .play'),\n                $close = $carousel.find('.video-wrapper .close'),\n                speed = 500,\n                originalHeight = this.originalHeight;\n            $overlay.fadeIn(speed, function() {\n                $close.removeClass('active');\n                $('.skycom-carousel').animate({ height: originalHeight }, speed, function(){\n                    $('.skycom-carousel').css({ height: 'auto' });\n                    callback();\n                    $play.fadeIn();\n                    $overlay.fadeOut();\n                    $wrapper.removeClass('playing-video');\n                });\n            });\n        }\n    };\n\n    // jquerify\n    $.fn.skycom_carousel = function(params) {\n        var options = $.extend(true, {\n            carousel: {\n\n                actions: [\n                    { id: 'previous', label: 'Previous' },\n                    { id: 'next', label: 'Next' },\n                    { id: 'play', label: 'Play Carousel' },\n                    { id: 'pause', label: 'Pause Carousel' }\n                ],\n                autoplay: true,\n                onPlayDelay: 500,\n                interval: 6000\n            },\n            video: {\n                player: {\n                    token:\"8D5B12D4-E1E6-48E8-AF24-F7B13050EE85\",\n                    autoplay: false\n                },\n                placeHolderImage: '//static.video.sky.com/posterframes/skychasky.jpg',\n                autoplay: !globalskycom.browserSupport.isMobile()\n            }\n        }, params);\n\n        // generating default markup\n        var markup = {\n            actions: function($element, options){\n\n                var html = '', action, label, i, extraClass,\n                    actions = options.actions,\n                    onclick = options.onclick;\n                if(options.count <= 1) return this;\n                for (i in actions) {\n                    extraClass = '';\n                    action = actions[i].id;\n                    label = actions[i].label;\n                    if (action=='next' || action=='previous'){\n                        extraClass=' hidden-touch ';\n                    }\n                    html += '<a href=\"#\" class=\"skycom-internal ' + extraClass + action + '\" >';\n                    html += '<span class=\"icon-carousel-' + action + '\"></span>' + label;\n                    if (action == 'next' || action == 'previous') {\n                        html += '<span class=\"icon-carousel-' + action + '-over over\"></span>';\n                    }\n                    html += '</a>';\n                }\n                $element.prepend('<div class=\"actions\">' + html + '</div>').find('> .actions > *').each(function(index) {\n                    $(this).attr('data-action', actions[index].id).on('click', function(e) {\n                        onclick(actions[index].id);\n                        e.preventDefault();\n                    });\n                });\n                return this;\n            },\n            indicators: function($element, options) {\n\n                var $indicators, i,\n                    count = options.count,\n                    onclick = options.onclick,\n                    html = '<div class=\"indicators\"><div class=\"container\">',\n                    className = ' class=\"active\"';\n                if (count <= 1) return this;\n                for (i = count; i--;) {\n                    html += '<span' + className + ' data-track data-tracking-label=\"indicator\"></span>';\n                    className = '';\n                }\n                $indicators = $(html + '</div></div>').on('click', 'span', function(e) {\n                    onclick($(e.currentTarget).index());\n                });\n                $element.append($indicators);\n                return this;\n            },\n            video: function($element) {\n                $element.append('<div class=\"video-overlay\"></div>');\n                return this;\n            }\n        };\n\n        return this.each(function() {\n            var $this = $(this);\n            var carousel = new Carousel($this, options.carousel);\n\n            markup.indicators($this, {\n                count: carousel.slideCount,\n                onclick: function(index) {\n                    carousel.goto(index);\n                }\n            }).actions($this, {\n                count: carousel.slideCount,\n                actions: options.carousel.actions,\n                onclick: function(action) {\n                    carousel[action]();\n                }\n            }).video($this);\n\n            $this.on('click', '.video-wrapper .play', function(e) {\n                var video = new Video($(this).closest('.video-wrapper'), carousel, options.video);\n                video.play();\n                return false;\n            }).on('change',function(e, index) {\n                index = index || 0;\n                $this.find('.indicators .container > *').removeClass('active').eq(index).addClass('active');\n                carousel.$slides.removeClass('active').find('a').attr('tabindex',-1);\n                carousel.$slides.eq(index).addClass('active').find('a').removeAttr('tabindex');\n            }).on('playing',function() {\n                $this.removeClass('paused').addClass('playing');\n            }).on('paused',function() {\n                $this.removeClass('playing').addClass('paused');\n            }).on('pause',function() {\n                carousel.pause();\n            }).on('play',function() {\n                carousel.play();\n            }).on('keyup',function(e){\n                switch(e.keyCode){\n                    case 9: carousel.pause(); break; //tab\n                    case 37: carousel.previous(); break; //left arrow\n                    case 39: carousel.next(); break; //right arrow\n                }\n            }).find('.toggle-terms').on('click', function(e) {\n                carousel.$viewport.toggleClass('showing-tandcs');\n            });\n\n            // must specify interval to override default onPlayDelay interval\n            carousel[options.carousel.autoplay === true ? 'play' : 'pause'](false, options.carousel.interval);\n            $this.trigger('change');\n        });\n    };\n}(window, jQuery));\n\nif (typeof window.define === \"function\" && window.define.amd) {\n    define('modules/carousel', [], function() {\n        return toolkit.carousel;\n    });\n};","\nif (typeof window.define === \"function\" && window.define.amd) {\n    define(['modules/tabs',\n        'modules/carousel'])\n};"]}