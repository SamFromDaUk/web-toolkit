<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <script src="../../dist/scripts/lib/jquery-2.0.3.js"></script>
    <script src="vendor/mocha.js"></script>
    <script src="vendor/require.js"></script>
    <script src="config.js" ></script>

</head>
<body>
<!--PLACEHOLDER FOR MOCHA TEST RESULTS-->
<div id="mocha"></div>

<!--FIXTURE HTML FOR TESTS-->
<div id="spec-markup">

	<div>
		<section class="module clearfix" data-function="tabs" data-remember-state="true">
            <h2 class="at">This is a screenreader header for tabs</h2>

            <ul class="tabs clearfix" role="tablist">
                <li id="first-tab" aria-controls="first" aria-label="first" role="tab" class="tab selected" data-value="1">
                    <a href="#!first" class="skycom-ellipsis"><span>First</span></a>
                </li>
                <li id="second-tab" aria-controls="second" aria-label="second" role="tab" class="tab" data-value="2">
                    <a href="#!second" class="skycom-ellipsis"><span>SecondSecond</span></a>
                </li>
                <li id="third-tab" aria-controls="third" aria-label="third" role="tab" class="tab" data-value="3">
                    <a href="#!third" class="skycom-ellipsis"><span>ThirdThirdThird</span></a>
                </li>
                <li id="fourth-tab" aria-controls="fourth" aria-label="fourth" role="tab" class="tab" data-value="4">
                    <a href="#!fourth" class="skycom-ellipsis"><span>FourthFourth</span></a>
                </li>
                <li id="fifth-tab" aria-controls="fifth" aria-label="fifth" role="tab" class="tab" data-value="5">
                    <a href="#!fifth" class="skycom-ellipsis"><span>FifthFifthFifthFifth</span></a>
                </li>
                <li id="sixth-tab" aria-controls="sixth" aria-label="sixth" role="tab" class="tab" data-value="6">
                    <a href="#!sixth" class="skycom-ellipsis"><span>Sixth</span></a>
                </li>
                <li id="seventh-tab" aria-controls="seventh" aria-label="seventh" role="tab" class="tab" data-value="7">
                    <a href="#!seventh" class="skycom-ellipsis"><span>Seventh</span></a>
                </li>
                <div class="dropdown-tab-select">
                    <a href="#" aria-controls="dropdown" aria-label="more tabs">...</a>
                    <ul class="dropdown-tab-info">

                    </ul>
                </div>                 
            </ul>

            <div id="first" class="tabpanel selected" aria-labeledby="first-tab" role="tabpanel">
                <section class="tabcontents clearfix">
                    <h2 class="at">Screen reader header for First tab contents</h2>
                    <div class="skycom-12 alpha">
                        <img src="/wiki_images/beckham.jpg" alt="beckham looking for help">
                    </div>
                </section>
            </div>

            <div id="second" class="tabpanel" aria-labeledby="second-tab" role="tabpanel">
                <section class="tabcontents clearfix">
                    <h2 class="at">Screen reader header for Second tab contents</h2>
                    <div class="skycom-12 alpha">
                        <img src="/wiki_images/smash.jpg" alt="something else">
                    </div>
                </section>
            </div>

            <div id="third" class="tabpanel" aria-labeledby="third-tab" role="tabpanel">
                <section class="tabcontents clearfix">
                    <h2 class="at">Screen reader header for Third tab contents</h2>
                    <div class="skycom-12 alpha">
                        <img src="/wiki_images/beckham.jpg" alt="something else">
                    </div>
                </section>
            </div>

            <div id="fourth" class="tabpanel" aria-labeledby="fourth-tab" role="tabpanel">
                <section class="tabcontents clearfix">
                    <h2 class="at">Screen reader header for Fourth tab contents</h2>
                    <div class="skycom-12 alpha">
                        <img src="/wiki_images/smash.jpg" alt="something else">
                    </div>
                </section>
            </div>

            <div id="fifth" class="tabpanel" aria-labeledby="fifth-tab" role="tabpanel">
                <section class="tabcontents clearfix">
                    <h2 class="at">Screen reader header for Fifth tab contents</h2>
                    <div class="skycom-12 alpha">
                        <img src="/wiki_images/beckham.jpg" alt="something else">
                    </div>
                </section>
            </div>

            <div id="sixth" class="tabpanel" aria-labeledby="sixth-tab" role="tabpanel">
                <section class="tabcontents clearfix">
                    <h2 class="at">Screen reader header for Sixth tab contents</h2>
                    <div class="skycom-12 alpha">
                        <img src="/wiki_images/smash.jpg" alt="something else">
                    </div>
                </section>
            </div>

            <div id="seventh" class="tabpanel" aria-labeledby="seventh-tab" role="tabpanel">
                <section class="tabcontents clearfix">
                    <h2 class="at">Screen reader header for Seventh tab contents</h2>
                    <div class="skycom-12 alpha">
                        <img src="/wiki_images/beckham.jpg" alt="something else">
                    </div>
                </section>
            </div>

        </section>
	</div>
</div>

<!--TEST-->
<script>

    require(['modules/share', '../../test/jsUnit/setup'],function(share){

        describe('Share module with click', function() {
            share.init();
            it('clicking share link should open the popup', function() {
                expect($('.share-popup.active').length).to.equal(0);
                $('.summary').click();
                expect($('.share-popup.active').length).to.equal(1);
                $('.summary').click();
                expect($('.share-popup.active').length).to.equal(0);
            });

            it(' Pressing enter on share link should open popup', function() {
                expect($('.share-popup.active').length).to.equal(0);
                var e = jQuery.Event("keypress");
                e.which = 13; // # Some key code value
                $(".summary").trigger(e);
                expect($('.share-popup.active').length).to.equal(1);
                $(".summary").trigger(e);
                expect($('.share-popup.active').length).to.equal(0);
            });

            it('Pressing any key should not open share popup', function() {
                expect($('.share-popup.active').length).to.equal(0);
                var e = jQuery.Event("keypress");
                e.which = 12; // # Some key code value
                $(".summary").trigger(e);
                expect($('.share-popup.active').length).to.equal(0);
            });
        });
        mocha.run();
    });
</script>

</body>
</html>